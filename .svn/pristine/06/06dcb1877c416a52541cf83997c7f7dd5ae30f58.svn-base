<div class="doc">
  <div class="bg-muted" style="min-height: 113px;">
    <div class="text-gold text-left">本店共{{view.result.total||0}}笔消费，共计（元）</div>
    <div class="text-white" style="float: left;margin-top:10px">
      <div>账单金额: {{title.amount||0}}</div>
      <div>权益抵扣: {{title.deduct||0}}</div>
      <div>实际付款: {{title.revenue||0}}</div>
    </div>
    <ul class="bg-mute-inner icons" ng-if="title.deductDetail">
      <li ng-repeat="item in title.deductDetail"><span class="icon" ng-class="item.type"></span>{{item.amount}}</li>
    </ul>
  </div>
  <table class="table" ng-if="view.result.total"
         ng-init="types={'1000':'刷卡','1001':'现金','1003':'微信','1004':'微信', '1005':'微信','1101':'支付宝'}">
    <thead>
    <tr>
      <td>序号</td>
      <td>订单号</td>
      <td>上宾号</td>
      <td>
        <div>消费总额</div>
        <div>(元)</div>
      </td>
      <td>
        <div>权益抵扣</div>
        <div>(元)</div>
      </td>
      <td>
        <div>实收金额</div>
        <div>(元)</div>
      </td>
      <td>支付方式</td>
      <td>操作员</td>
      <td>时间</td>
    </tr>
    </thead>
    <tbody class="slide-down" ng-repeat="item in view.result.items">
    <tr>
      <td ng-bind="((page-1)*count)+$index+1"></td>
      <td ng-bind="item.no"></td>
      <td ng-bind="item.userName||''"></td>
      <td ng-bind="item.amount"></td>
      <td ng-class="{'triangle':item.strategy.used||item.strategy.coupons||item.strategy.points||item.strategy.nonPart}"
          ng-bind="item.reduceAmount"></td>
      <td ng-bind="item.strategy.finalAmount"></td>
      <td ng-bind="types[item.paymentMode]"></td>
      <td ng-bind="item.staffName||'自助'"></td>
      <td ng-bind="item.checkTime"></td>
    </tr>
    <tr ng-if="item.strategy.used||item.strategy.coupons||item.strategy.points||item.strategy.nonPart">
      <td></td>
      <td colspan="8" style="line-height: 2" class="bg-blue icons row text-left" ng-class="{'ellipsis':!show}">
        <div class="row">
          <div class="col-sm-2 remain text-muted">抵扣：</div>
          <div class="col-sm-4 remain">
            <div ng-repeat="use in item.strategy.used">
              <span class="DISCOUNT icon" ng-class="use.type"></span><span
                    class="text-muted">{{use.content}}</span><span
                    class="text-primary">- {{use.amount}}</span>
            </div>
          </div>
          <div class="col-sm-2 text-muted text-left" ng-if="item.strategy.coupons||item.strategy.points"
               style="border-left: 1px solid;">获得：
          </div>
          <div class="col-sm-4 text-left">
            <div ng-repeat="coupon in item.strategy.coupons"><span class="COUPON icon"></span><span
                    class="text-muted">{{coupon.name}}</span><span
                    class="text-primary"> {{coupon.value}}</span>
            </div>
            <div ng-if="item.strategy.points"><span class="POINT icon"></span><span
                    class="text-muted">积分</span><span
                    class="text-primary"> {{item.strategy.points.point}}</span>
            </div>
          </div>
        </div>
        <div class="row text-left" ng-if="item.strategy.nonPart">
          <div class="col-sm-2 text-muted">不参与项：</div>
          <div class="col-sm-10">
            <span class="text-muted">{{item.strategy.nonPart.name}}</span>
            <span class="text-primary">{{item.strategy.nonPart.amount}}</span>
          </div>
        </div>
        <div class="click" ng-hide="show" style="position: absolute;top: 15px;right: 20px;color: black"
             ng-click="show=1">
          展开详情 <span class="glyphicon glyphicon-chevron-down"></span>
        </div>
        <div ng-show="show" style="position: absolute;right: 20px;bottom: 10px" ng-click="show=0" class="click">
          收起 <span class="glyphicon glyphicon-remove"></span>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>