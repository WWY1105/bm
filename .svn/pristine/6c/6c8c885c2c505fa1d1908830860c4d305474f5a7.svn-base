<!DOCTYPE html>
<html ng-app="app">
<head>
  <!--[if lte IE 8]>
  <script>window.location.href = '/upload.html';</script>
  <![endif]-->
  <!--[if lte IE 7]>
  <script>window.location.href = '/upload.html';</script>
  <![endif]-->
  <!--[if lte IE 6]>
  <script>window.location.href = '/upload.html';</script>
  <![endif]-->
  <!--[if lt IE 9]>
  <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
  <![endif]-->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>管理系统首页</title>
  <link rel="Shortcut Icon" href="favicon.ico"/>

  <link rel="stylesheet" href="public/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="public/css/style.css"/>
  <link rel="stylesheet" href="bower_components/angular-loading-bar/build/loading-bar.css"/>
  <link rel="stylesheet" href="bower_components/angular-tooltips/dist/angular-tooltips.min.css"/>
</head>
<body>
<header ng-include="'staff/header.html'" scope="" onload="">
</header>
<div style="height: 70px"></div>
<div class="view-slide-out" ng-class="{'container':!config.class}">
  <div ng-view class="view-slide-in"></div>
</div>

<div class="modal fade bs-example-modal-sm in" id="modal">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-body" ng-bind="config.modalContent">

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="console.log(config.modalLink)" data-dismiss="modal">关闭
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<footer ng-include="'footer.html'"></footer>

<script type="text/javascript" src="public/js/jquery/jquery.min.js"></script>
<script type="text/javascript" src="public/js/bootstrap.min.js"></script>
<script type="text/javascript" src="public/angular/angular.min.js"></script>
<script type="text/javascript" src="public/js/jquery/jqcookie.min.js"></script>

<!--require-->
<!--<script type="text/javascript" src="public/js/highcharts/highcharts.js"></script>-->
<!--<script type="text/javascript" src="public/js/highcharts/highcharts-ng.js"></script>-->
<script type="text/javascript" src="public/js/highcharts/concat.min.js"></script>

<script src="https://webapi.amap.com/maps?v=1.3&key=0afc3e67ea501df6fbedfcdbaa727df9"></script>
<script type="text/javascript" src="public/angular/angular-route.min.js"></script>
<script type="text/javascript" src="public/angular/angular-messages.min.js"></script>
<script type="text/javascript" src="public/angular/angular-animate.min.js"></script>
<script type="text/javascript" src="public/angular/ui-bootstrap-min.js"></script>
<script type="text/javascript" src="public/js/jquery/jquery.form.min.js"></script>
<script type="text/javascript" src="bower_components/angular-loading-bar/build/loading-bar.min.js"></script>
<script type="text/javascript" src="bower_components/angular-tooltips/dist/angular-tooltips.min.js"></script>
<script type="text/javascript" src="public/js/mydatepick.min.js"></script>


<script src="//monospaced.github.io/bower-qrcode-generator/js/qrcode.js"></script>
<script type="text/javascript" src="public/js/common/qrcode.min.js"></script>


<script type="text/javascript" src="public/js/md5.min.js"></script>
<script type="text/javascript" src="public/js/dest/config.js"></script>
<!--<script type="text/javascript" src="public/js/build/statistics.js"></script>-->
<!--<script type="text/javascript" src="public/js/keeperctr.js"></script>-->
<script>
  app.config(['$routeProvider', function ($routeProvider) {
    $routeProvider.when('/', {templateUrl: "staff/shop/index.html", controller: "HomeCtr"}) //首页
            .otherwise({redirectTo: "/"});
  }]);

  app.controller('HomeCtr', function ($scope, $location, $filter) { //店铺
    $scope.config.breadset = [{name: "我的门店"}]; //面包屑;

    $scope.shopshow = {
      shop: ajaxSendFn({}, "/shops/shop", "GET").result
    };
    if (!$scope.shopshow.shop.businessTimes) {
      $location.path("/shop/add");
      return;
    }
    $scope.tem = {};
    $scope.tem.type = {
      "1001": "早市",
      "1002": "午市",
      "1003": "下午茶",
      "1004": "晚市",
      "1005": "夜宵",
    };
    $scope.authed = {
      "1001": "创建中",
      "1002": "认证审核中",
      "1003": "已通过审核",
      "1004": "关闭审核中",
      "1005": "停用",
    };

    $scope.view = {
      businesstime: {
        1001: {startTime: '', endTime: ''},
        1002: {startTime: '', endTime: ''},
        1003: {startTime: '', endTime: ''},
        1004: {startTime: '', endTime: ''},
        1005: {startTime: '', endTime: ''},
      }
    }

    //$scope.shopshow.shop.shopType = shopTypeJson[$scope.shopshow.shop.shopType];
    $scope.shopshow.shop.openingDay = $filter("ltdate")($scope.shopshow.shop.openingDay);
    mapFn = function (a) { //
      if (!$scope.shopshow.shop.latitude || !$scope.shopshow.shop.longitude) return;
      $scope.shopshow.shop.map = "http://restapi.amap.com/v3/staticmap?zoom=16&size=180*120&markers=-1,http://api.amap.com/Public/imgbox/static/8.png,0:" + $scope.shopshow.shop.longitude + "," + $scope.shopshow.shop.latitude + "&key=ee95e52bf08006f63fd29bcfbcf21df0"
    }
    mapFn();

  })
</script>
</body>
</html>
