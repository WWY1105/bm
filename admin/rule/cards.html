<div class="row bg-white">
    <div ng-include="'/admin/rule/leftmenu.html'"></div>
    <div class="v-shadow-content">
      <div class="col-sm-12 mb15">
        <div class="col-sm-2 col-sm-offset-10 btn btn-primary" ng-click="openOrClose()">添加储值卡</div>
      </div>
  
      <table class="table table-bordered">
        <thead>
        <tr class="plan-title">
          <td>序号</td>
          <td>名称</td>
          <td>别名</td>
          <td>编号</td>
          <td>总数</td>
          <td>创建时间</td>
          <td>操作</td>
        </tr>
        </thead>
        <tbody class="slide-down">
        <tr ng-repeat="row in view.cards.items" ng-class="{'active':!row.on}">
          <td ng-bind="((view.cards.page-1)*view.cards.count)+$index+1"></td>
          <td ng-bind="row.name"></td>
          <td ng-bind="row.alias"></td>
          <td ng-bind="row.code"></td>
          <td ng-bind="row.total||0"></td>
          <td ng-bind="row.createTime"></td>
          <td>
            <a ng-click="detailFn(row.id)">详情</a>
            <a ng-click="editFn(row.id)">修改</a>
            <a ng-if="!row.on" ng-click="cardsTurn($index,'on')">上线</a>
            <a ng-if="row.on" ng-click="cardsTurn($index,'off')">下线</a>
            <a ng-click="cardsDelFn($index)">删除</a>
          </td>
        </tr>
        </tbody>
      </table>
      <div class="col-sm-12 plan-son text-left" ng-if="!view.cards.items[0]">
        无查询结果
      </div>
      <div class="col-sm-12" ng-if="view.cards.pageSize>1">
        <pagination items-per-page="view.cards.count" boundary-links="true" total-items="view.cards.total"
                    ng-model="view.cards.page" class="pagination-sm" previous-text="&lsaquo;" ng-change="pageChange()"
                    next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
      </div>

      <div class="modal fade " id="addCard" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content ">
            <div class="modal-header">
              <h4 class="modal-title">添加储值卡</h4>
            </div>
            <div class="modal-body">
                <div class="form-inline mt15">
                    <label class="control-label col-sm-2">名称</label>
                    <div class="form-group">
                        <input class="form-control" type="text" ng-model="cards.name"/>
                    </div>
                </div>

                <!-- <div class="out mt15" >
                    <label class="control-label col-sm-2">有效期</label>
                    <div class="form-group">
                        <div style="width: 100%;margin: 20px 0;" my-date-picker data="cards.date" date-range="view.dateRange" is-edit="post.isEdit"></div>
                    </div>
                </div> -->

                <div class="form-inline mt15">
                    <label class="control-label col-sm-2">面额</label>
                    <div class="form-group">
                        <input class="form-control" type="number" ng-model="cards.amount"/>
                    </div>
                </div>
                <div class="form-inline mt15">
                    <label class="control-label col-sm-2">别名</label>
                    <div class="form-group">
                        <input class="form-control" type="text" ng-model="cards.alias"/>
                    </div>
                </div>
                <div class="form-inline col-sm-12 mt15">
                    <div class="col-sm-2">
                        <span class="title"><span class="text-red">*</span>封面图</span>
                    </div>
                    <div class="col-sm-8">
                        <pic-send style="padding: 15px 0" pic-url="cards.picUrl" min-width="" min-height=""></pic-send>
                    </div>
                </div>
                <div class="form-inline col-sm-12 mt15">
                    <label class="control-label col-sm-2"><span class="text-red">*</span>可用门店</label>
                
                    <div class="form-group" style="margin-top: -24px;padding-left: 17%;float: left;width: 100%">
                        <label class="checkbox-inline">
                        <input type="checkbox" ng-model="checkAllShop" ng-change="checkAllShops()" value="option1"/>全选
                        </label>
                
                        <div class="form-control-stack text-left" id="">
                        <label class="checkbox-inline mr35" ng-repeat="shoplist in shops">
                            <input type="checkbox" ng-model="cards.shops[$index]" ng-true-value="{{shoplist.id}}" ng-false-value=""/>
                            <span ng-bind="shoplist.name"></span>
                        </label>
                        </div>
                    </div>
                </div>
                <div class="form-inline col-sm-12 mt15">
                    <label class="control-label col-sm-2"><span class="text-red">*</span>可用时段</label>
                
                    <div class="form-group">
                        <div style="padding: 3px 0" class="">
                            <input type="checkbox"  ng-model="cards.allDay"/><label for="allday">全天</label>
                        </div>
                    </div>
                </div>
                <div class="form-inline col-sm-12 mt15">
                    <label class="control-label col-sm-2">附加说明</label>
                    <div class="form-group">
                        <textarea ng-model="cards.additional" class="form-control"></textarea>
                    </div>
                </div>
                <div class="form-inline mt15">
                    <label class="control-label col-sm-2">特殊说明</label>
                    <div class="form-group timecheck">
                        <div class="form-control-static">1.本券不兑换现金、不找零。</div>
                        <div class="form-control-static">2.本活动在法律允许范围内商家拥有最终解释权。</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-md-3 col-md-offset-3">
                        <div class="btn btn-primary btn-block" ng-click="submitFn()">确定</div>
                    </div>
                    <div class="col-md-3 col-md-setoff-1">
                        <div class="btn btn-default btn-block" data-dismiss="modal">关闭</div>
                    </div>
                </div>
            </div>
          </div>
         
        </div>
       
      </div>
  
      <div class="modal fade" id="show" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                &times;
              </button>
              <h4 class="modal-title" ng-bind="cards.name"></h4>
            </div>
            <div class="modal-body">
              <img ng-src="{{cards.picUrl}}" style="max-height: 100px">
              <div>价值{{cards.amount}}元</div>
              <div class="" ng-repeat="a in cards.content" ng-bind="a">
              </div>
            </div>
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
      </div>
      <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width: 65%">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                &times;
              </button>
              <h4 class="modal-title" ng-bind="cards.name"></h4>
            </div>
            <div class="modal-body" style="min-height: 500px">
              <div class="form-inline">
                <label class="control-label col-sm-2">别名</label>
  
                <div class="form-group">
                  <input class="form-control" type="text" ng-model="cards.alias"/>
                </div>
              </div>
              <div class="form-inline mt15">
                <label class="control-label col-sm-2">图片</label>
                <div class="form-group">
                  <pic-send pic-url="cards.picUrl" min-width="" min-height=""></pic-send>
                </div>
              </div>
              <div class="form-inline">
                <label class="control-label col-sm-2">附加说明</label>
  
                <div class="form-group">
                  <textarea class="form-control" ng-model="cards.additional"></textarea>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div class="col-md-3 col-md-offset-3">
                <div class="btn btn-primary btn-block" ng-click="editOkFn(cards.id)">确定</div>
              </div>
              <div class="col-md-3 col-md-setoff-1">
                <div class="btn btn-default btn-block" data-dismiss="modal">关闭</div>
              </div>
            </div>
  
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
      </div>
  
    </div>
  </div>
  