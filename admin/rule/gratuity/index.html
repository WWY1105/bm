<div class="row bg-white">
  <div ng-include="'/admin/rule/leftmenu.html'"></div>
  <div class="v-shadow-content ruleadd">
    <div class="col-sm-12 mb15">
      <button type="button" class="btn btn-primary pull-right" ng-click="goto('rule/gratuity/add')">新增
      </button>
    </div>
    <div class="time-line1" ng-repeat="item in view.list.items">
      <div class="line-in">
        <h4>{{item.name}} <span class="text-red">{{item.state=='DISABLED'?'已结束':''}}</span></h4>
        <img ng-if="item.picUrl" style="height: 200px" ng-src="{{item.picUrl||''}}">

        <div ng-repeat="text in item.text"><p>{{text}}</p></div>
        <div ng-if="item.url">
          <div>活动分享链接</div>
          <input value="{{item.url}}" readonly>
          <button ng-click="copyFn(item.url)">复制链接</button>
        </div>
        <div class="mt15">
          <button type="button" ng-if="!item.on" class="btn btn-primary" ng-click="goto('rule/gratuity/' +item.id)">修改
          </button>
          <button type="button" class="btn btn-warning" ng-if="item.on" ng-click="stateFn(item.id,'off')" ng-if="item.on">下线
          </button>
          <button type="button" class="btn btn-warning" ng-if="!item.on" ng-click="stateFn(item.id,'on')" ng-if="item.on">上线
          </button>
          <button type="button" class="btn btn-danger" ng-click="removeFn(item.id)"
                  ng-if="!item.on">删除
          </button>
        </div>
      </div>
    </div>
    <div class="col-sm-12" ng-if="view.list.pageSize>1">
      <pagination items-per-page="view.list.count" boundary-link="true" rotate="false" max-size="20"
                  total-items="view.list.total"
                  ng-model="view.list.page" class="pagination-sm" previous-text="&lsaquo;"
                  next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
                  ng-change="pageChange()"></pagination>

    </div>
  </div>
</div>